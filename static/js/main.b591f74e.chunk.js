(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{182:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),i=n(22),a=n.n(i),s=n(7),o=n(23),u=n.n(o),l=n(1),d=function(){return Object(l.jsx)("header",{children:Object(l.jsxs)("nav",{className:u.a.container,children:[Object(l.jsxs)("div",{className:u.a.flex,children:[Object(l.jsxs)("a",{className:"".concat(u.a.item," pt-4 pb-4 pl-5 pr-5 ml-2 "),href:"/#",children:[Object(l.jsx)(s.BurgerIcon,{type:"primary"}),Object(l.jsx)("p",{className:"text text_type_main-default text_color_primary pl-2",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(l.jsxs)("a",{className:"".concat(u.a.item," pt-4 pb-4 pl-5 pr-5 ml-2 "),href:"/#",children:[Object(l.jsx)(s.ListIcon,{type:"primary"}),Object(l.jsx)("p",{className:"text text_type_main-default text_color_inactive pl-2",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(l.jsx)(s.Logo,{}),Object(l.jsxs)("a",{className:"".concat(u.a.item," pt-4 pb-4 pl-5 pr-5 ml-2"),href:"/#",children:[Object(l.jsx)(s.ProfileIcon,{type:"primary"}),Object(l.jsx)("p",{className:"text text_type_main-default text_color_inactive pl-2",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})})},j=n(14),b=n(57),m=n.n(b),p=n(12),O=n.n(p),_=(O.a.shape({name:O.a.string.isRequired,image:O.a.string.isRequired,calories:O.a.number.isRequired,proteins:O.a.number.isRequired,fat:O.a.number.isRequired,carbohydrates:O.a.number.isRequired,price:O.a.number.isRequired,_id:O.a.string.isRequired}),n(189)),x=n(6),f=function(e){var t=e.ingredient,n=e.handleClick,r=Object(x.c)((function(e){return e.burger.constructorElements})),i=Object(x.c)((function(e){return e.burger.bun})),a=Object(c.useMemo)((function(){return"bun"!==t.type?r.reduce((function(e,n){return n._id===t._id?e+1:e}),0):i&&i._id===t._id?1:void 0}),[r,i,t._id,t.type]),o=Object(_.a)({type:"ingredient",item:{ingredient:t}}),u=Object(j.a)(o,2)[1];return Object(l.jsxs)("article",{onClick:function(){return n(t)},className:m.a.container,ref:u,children:[a>0&&Object(l.jsx)(s.Counter,{count:a,size:"default"}),Object(l.jsx)("img",{src:t.image,alt:t.name}),Object(l.jsxs)("div",{className:"".concat(m.a.flex," pb-1 pt-1"),children:[Object(l.jsx)("span",{style:{textAlign:"center"},className:"text text_type_digits-default",children:t.price}),Object(l.jsx)(s.CurrencyIcon,{type:"primary"})]}),Object(l.jsx)("p",{className:"text text_type_main-default text_color_primary",children:t.name})]})},h=n(19),g=n.n(h),y=n(29),v=n.n(y),N=n(60),E="https://norma.nomoreparties.space/api",R="ADD_INGREDIENT",C="REMOVE_INGREDIENT",I="ADD_BUN",k="GET_INGREDIENTS_REQUEST",T="GET_INGREDIENTS_SUCCESS",D="GET_INGREDIENTS_FAILED",S="ADD_CURRENT_INGREDIENT",w="REMOVE_CURRENT_INGREDIENT",q="MAKE_ORDER_REQUEST",B="MAKE_ORDER_SUCCESS",A="MAKE_ORDER_FAILED",L="CLEAR_ORDER_MODAL",M="SORT_CONSTRUCTOR_INGREDIENTS",F="CLEAR_CONSTRUCTOR_INGREDIENTS";var G=function(){var e=Object(N.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/orders"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({ingredients:t})}).then(V);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(N.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/ingredients")).then(V);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function V(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))}var P=n(88),X=n.n(P),K=function(e){var t=e.children,n=e.handleClose;return Object(l.jsx)("div",{className:X.a.overlay,onClick:n,children:t})},Y=n(61),J=n.n(Y),z=function(e){var t=e.children,n=e.handleClose,r=document.getElementById("modal-root");return Object(c.useEffect)((function(){var e=function(e){"Escape"===e.key&&n(e)};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[n]),a.a.createPortal(Object(l.jsx)(K,{handleClose:n,children:Object(l.jsxs)("div",{className:J.a.container,onClick:function(e){e.stopPropagation()},children:[Object(l.jsx)("button",{type:"button",className:J.a.closeButton,onClick:n,children:Object(l.jsx)(s.CloseIcon,{type:"primary"})}),t]})}),r)},Q=n(37),W=n.n(Q),Z=function(){var e=Object(x.c)((function(e){return e.burger.currentIngredient}));return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h3",{className:"".concat(W.a.header," pl-10 pt-10 text text_type_main-large text_color_primary"),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(l.jsx)("img",{className:W.a.image,src:e.image,alt:e.name}),Object(l.jsx)("p",{className:"pb-8 pt-4 text text_type_main-medium text_color_primary",children:e.name}),Object(l.jsxs)("ul",{className:"mb-15  ".concat(W.a.container),children:[Object(l.jsxs)("li",{children:[Object(l.jsx)("p",{className:"pb-2 text text_type_main-default text_color_inactive",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(l.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:e.calories})]}),Object(l.jsxs)("li",{children:[Object(l.jsx)("p",{className:"pb-2 text text_type_main-default text_color_inactive",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(l.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:e.proteins})]}),Object(l.jsxs)("li",{children:[Object(l.jsx)("p",{className:"pb-2 text text_type_main-default text_color_inactive",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(l.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:e.fat})]}),Object(l.jsxs)("li",{children:[Object(l.jsx)("p",{className:"pb-2 text text_type_main-default text_color_inactive",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(l.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:e.carbohydrates})]})]})]})},H=function(){var e=Object(x.c)((function(e){return e.burger.ingredients})),t=Object(x.b)(),n=Object(c.useState)("buns"),r=Object(j.a)(n,2),i=r[0],a=r[1],o=Object(c.useRef)(),u=Object(c.useRef)(),d=Object(c.useRef)();Object(c.useEffect)((function(){"buns"===i?o.current.scrollIntoView({behavior:"smooth"}):"sauces"===i?u.current.scrollIntoView({behavior:"smooth"}):"main"===i&&d.current.scrollIntoView({behavior:"smooth"})}),[i]);var b=Object(c.useMemo)((function(){return e.filter((function(e){return"bun"===e.type}))}),[e]),m=Object(c.useMemo)((function(){return e.filter((function(e){return"main"===e.type}))}),[e]),p=Object(c.useMemo)((function(){return e.filter((function(e){return"sauce"===e.type}))}),[e]),O=function(e){t({type:S,item:e})},_=Object(x.c)((function(e){return e.burger.currentIngredient}));return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("section",{className:"".concat(g.a.container," pt-10 pr-10"),children:[Object(l.jsx)("h1",{className:"text text_type_main-large pb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(l.jsxs)("div",{className:g.a.flex,children:[Object(l.jsx)(s.Tab,{value:"buns",active:"buns"===i,onClick:a,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(l.jsx)(s.Tab,{value:"sauces",active:"sauces"===i,onClick:a,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(l.jsx)(s.Tab,{value:"main",active:"main"===i,onClick:a,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(l.jsxs)("div",{className:"".concat(g.a.type," custom-scroll mt-10 pr-1"),onScroll:function(e){var t=e.target.getBoundingClientRect().top,n=o.current.getBoundingClientRect().top,c=o.current.getBoundingClientRect().bottom,r=d.current.getBoundingClientRect().top,i=d.current.getBoundingClientRect().bottom,s=u.current.getBoundingClientRect().top,l=u.current.getBoundingClientRect().bottom;n<=t&&c>t?a("buns"):s<=t&&l>t?a("sauces"):r<=t&&i>t&&a("main")},children:[Object(l.jsxs)("div",{ref:o,children:[Object(l.jsx)("h3",{className:"text text_type_main-medium pb-6",children:"\u0411\u0443\u043b\u043a\u0438"}),Object(l.jsx)("div",{className:g.a.grid,children:b.map((function(e){return Object(l.jsx)(f,{ingredient:e,handleClick:O},e._id)}))})]}),Object(l.jsxs)("div",{ref:u,children:[Object(l.jsx)("h3",{className:"text text_type_main-medium pb-6",children:"\u0421\u043e\u0443\u0441\u044b"}),Object(l.jsx)("div",{className:g.a.grid,children:p.map((function(e){return Object(l.jsx)(f,{ingredient:e,handleClick:O},e._id)}))})]}),Object(l.jsxs)("div",{ref:d,children:[Object(l.jsx)("h3",{className:"text text_type_main-medium pb-6",children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(l.jsx)("div",{className:g.a.grid,children:m.map((function(e){return Object(l.jsx)(f,{ingredient:e,handleClick:O},e._id)}))})]})]})]}),_&&Object(l.jsx)(z,{handleClose:function(){t({type:w})},children:Object(l.jsx)(Z,{})})]})},$=n(3),ee=n(24),te=n.n(ee),ne=n(62),ce=n.n(ne),re=function(){var e=Object(x.c)((function(e){return e.burger.orderNumber}));return Object(l.jsxs)("div",{className:"pt-8 pb-30 ".concat(ce.a.container),children:[Object(l.jsx)("p",{className:"pt-9 pb-8 text text_type_digits-large",children:e}),Object(l.jsx)("p",{className:"text text_type_main-medium",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(l.jsx)("div",{className:"mt-15 mb-15 ".concat(ce.a.check)}),Object(l.jsx)("p",{className:"pb-2 text text_type_main-default",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(l.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},ie=n(190),ae=n(89),se=n.n(ae),oe=n(191),ue=function(e){var t=e.ingredient,n=e.index,r=e.moveIngredient,i=Object(x.b)(),a=Object(c.useRef)(null),o=Object(ie.a)({accept:"constructorIngredient",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var c;if(a.current){var i=e.index,s=n;if(i!==s){var o=null===(c=a.current)||void 0===c?void 0:c.getBoundingClientRect(),u=(o.bottom-o.top)/2,l=t.getClientOffset().y-o.top;i<s&&l<u||i>s&&l>u||(r(i,s),e.index=s)}}}}),u=Object(j.a)(o,2),d=u[0].handlerId,b=u[1],m=Object(_.a)({type:"constructorIngredient",item:function(){return{id:t._id,index:n}},collect:function(e){return{isDragging:e.isDragging()}}}),p=Object(j.a)(m,2),O=p[0].isDragging?.2:1;return(0,p[1])(b(a)),Object(l.jsx)("li",{className:"ml-4",style:{opacity:O},ref:a,"data-handler-id":d,children:Object(l.jsx)(s.ConstructorElement,{type:null,isLocked:!1,handleClose:function(){return function(e){i({type:C,index:e})}(n)},text:t.name,thumbnail:t.image,price:t.price})})},le=function(){var e=Object(x.b)(),t=Object(x.c)((function(e){return e.burger.constructorElements})),n=Object(x.c)((function(e){return e.burger.orderNumber})),r=Object(x.c)((function(e){return e.burger.bun})),i=Object(c.useState)(0),a=Object(j.a)(i,2),o=a[0],u=a[1];Object(c.useEffect)((function(){if(r){var e=2*r.price;u(t.reduce((function(e,t){return e+t.price}),e))}}),[t,r]);var d=Object(c.useMemo)((function(){var e=t.map((function(e){return e._id}));if(r)return e.push(null===r||void 0===r?void 0:r._id),e}),[t,r]),b=Object(ie.a)({accept:"ingredient",drop:function(t){!function(t){"bun"!==t.ingredient.type?e({type:R,item:Object($.a)(Object($.a)({},t.ingredient),{},{uuid:Object(oe.a)()})}):"bun"===t.ingredient.type&&e({type:I,item:t.ingredient})}(t)}}),m=Object(j.a)(b,2)[1];var p=Object(c.useCallback)((function(n,c){var r=t[n];e({type:M,sortedIngredients:se()(t,{$splice:[[n,1],[c,0,r]]})})}),[t,e]);return Object(l.jsxs)("section",{className:"".concat(te.a.container," pt-25"),ref:m,children:[r&&Object(l.jsx)(s.ConstructorElement,{type:"top",isLocked:!0,handleClose:void 0,text:"".concat(r.name," ","(\u0432\u0435\u0440\u0445)"),price:r.price,thumbnail:r.image}),Object(l.jsx)("ul",{className:"".concat(te.a.list," custom-scroll pr-1 pl-2 mt-4 mb-4 "),children:t.map((function(e,t){return Object(l.jsx)(ue,{ingredient:e,index:t,moveIngredient:p},e.uuid)}))}),r&&Object(l.jsx)(s.ConstructorElement,{type:"bottom",isLocked:!0,handleClose:void 0,text:"".concat(r.name," ","(\u043d\u0438\u0437)"),price:r.price,thumbnail:r.image}),t&&r&&Object(l.jsxs)("div",{className:"".concat(te.a.flex," ").concat(te.a.flexCheck," pt-10"),children:[Object(l.jsxs)("div",{className:"".concat(te.a.flex," pr-10"),children:[Object(l.jsxs)("p",{className:"text text_type_digits-medium text_color_primary pr-2",children:[" ",o," "]}),Object(l.jsx)(s.CurrencyIcon,{className:"pr-10"})]}),Object(l.jsx)(s.Button,{type:"primary",size:"medium",onClick:function(){var t;e((t=d,function(e){e({type:q}),G(t).then((function(t){t&&t.success?e({type:B,currentOrder:t.name,orderNumber:t.order.number}):e({type:A})})).catch((function(e){return console.log("Error: ".concat(e))}))})),e({type:F})},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]}),n&&Object(l.jsx)(z,{handleClose:function(){e({type:L})},children:Object(l.jsx)(re,{})})]})},de=n(63),je=n.n(de),be=n(188),me=n(91),pe=function(){var e=Object(x.b)(),t=Object(x.c)((function(e){return e.burger.ingredients}));return Object(c.useEffect)((function(){e((function(e){e({type:k}),U().then((function(t){t&&t.success?e({type:T,ingredients:t.data}):e({type:D})})).catch((function(e){return console.log("Error: ".concat(e))}))}))}),[e]),Object(l.jsxs)("div",{className:je.a.app,children:[Object(l.jsx)(d,{}),Object(l.jsx)("main",{className:je.a.main,children:t&&Object(l.jsxs)(be.a,{backend:me.a,children:[Object(l.jsx)(H,{}),Object(l.jsx)(le,{})]})})]})},Oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,192)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),i(e),a(e)}))},_e=n(90),xe=n(16),fe=n(65),he={constructorElements:[],bun:null,ingredients:[],ingredientsRequest:!1,ingredientsFailed:!1,currentIngredient:null,makeOrderRequest:!1,makeOrderFailed:!1,currentOrder:null,orderNumber:null},ge=Object(xe.b)({burger:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object($.a)(Object($.a)({},e),{},{constructorElements:[].concat(Object(fe.a)(e.constructorElements),[t.item])});case C:return Object($.a)(Object($.a)({},e),{},{constructorElements:Object(fe.a)(e.constructorElements).filter((function(e,n){return t.index!==n}))});case I:return Object($.a)(Object($.a)({},e),{},{bun:t.item});case k:return Object($.a)(Object($.a)({},e),{},{ingredientsRequest:!0});case T:return Object($.a)(Object($.a)({},e),{},{ingredientsRequest:!1,ingredients:t.ingredients});case D:return Object($.a)(Object($.a)({},e),{},{ingredientsRequest:!1,ingredientsFailed:!0});case S:return Object($.a)(Object($.a)({},e),{},{currentIngredient:t.item});case w:return Object($.a)(Object($.a)({},e),{},{currentIngredient:null});case q:return Object($.a)(Object($.a)({},e),{},{makeOrderRequest:!0});case B:return Object($.a)(Object($.a)({},e),{},{makeOrderRequest:!1,makeOrderFailed:!1,currentOrder:t.currentOrder,orderNumber:t.orderNumber});case A:return Object($.a)(Object($.a)({},e),{},{makeOrderRequest:!1,makeOrderFailed:!0});case L:return Object($.a)(Object($.a)({},e),{},{orderNumber:null});case M:return Object($.a)(Object($.a)({},e),{},{constructorElements:t.sortedIngredients});case F:return Object($.a)(Object($.a)({},e),{},{constructorElements:[],bun:null});default:return e}}}),ye=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):xe.c)(Object(xe.a)(_e.a)),ve=Object(xe.d)(ge,ye);a.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(x.a,{store:ve,children:Object(l.jsx)(pe,{})})}),document.getElementById("root")),Oe()},19:function(e,t,n){e.exports={container:"burger-ingredients_container__2_Vm3",grid:"burger-ingredients_grid__2Ggmf",type:"burger-ingredients_type__1MYgM",flex:"burger-ingredients_flex__37IDe"}},23:function(e,t,n){e.exports={container:"app-header_container__3Oe03",item:"app-header_item__EA0KV",flex:"app-header_flex__1kWZW"}},24:function(e,t,n){e.exports={container:"burger-constructor_container__2RT7k",list:"burger-constructor_list__1YkNA",flex:"burger-constructor_flex__a5_2A",flexCheck:"burger-constructor_flexCheck__2jToV"}},37:function(e,t,n){e.exports={container:"ingredient-details_container__2urIj",image:"ingredient-details_image__35xCy",header:"ingredient-details_header__3qFaC"}},57:function(e,t,n){e.exports={container:"ingredients-item_container__3alZB",flex:"ingredients-item_flex__2qY2N"}},61:function(e,t,n){e.exports={container:"modal_container__Yvv-n",closeButton:"modal_closeButton__2eXp2"}},62:function(e,t,n){e.exports={container:"order-details_container__2k1nw",check:"order-details_check__2dh_U"}},63:function(e,t,n){e.exports={app:"app_app__i_TAO",main:"app_main__1kUw5"}},88:function(e,t,n){e.exports={overlay:"modal-overlay_overlay__1jhF1"}}},[[182,1,2]]]);
//# sourceMappingURL=main.b591f74e.chunk.js.map