{"version":3,"sources":["components/app-header/app-header.jsx","utils/types.js","components/ingredients-item/ingredients-item.jsx","utils/constants.js","services/actions/index.js","components/modal-overlay/modal-overlay.jsx","components/modal/modal.jsx","components/ingredient-details/ingredient-details.jsx","components/burger-ingredients/burger-ingredients.jsx","components/order-details/order-details.jsx","components/burgerConstructorElement/burger-constructor-element.jsx","components/burger-constructor/burger-constructor.jsx","components/app/app.jsx","reportWebVitals.ts","services/reducers/burger.js","services/reducers/index.js","index.jsx","components/burger-ingredients/burger-ingredients.module.css","components/app-header/app-header.module.css","components/burger-constructor/burger-constructor.module.css","components/ingredient-details/ingredient-details.module.css","components/ingredients-item/ingredients-item.module.css","components/modal/modal.module.css","components/order-details/order-details.module.css","components/app/app.module.css","components/modal-overlay/modal-overlay.module.css"],"names":["AppHeader","className","headerStyle","container","flex","item","href","type","PropTypes","shape","name","string","isRequired","image","calories","number","proteins","fat","carbohydrates","price","_id","IngredientsItem","ingredient","handleClick","constructorElements","useSelector","state","burger","bun","count","useMemo","reduce","acc","useDrag","dragRef","onClick","IngredientsItemStyle","ref","size","src","alt","style","textAlign","apiLink","ADD_INGREDIENT","REMOVE_INGREDIENT","ADD_BUN","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_SUCCESS","GET_INGREDIENTS_FAILED","ADD_CURRENT_INGREDIENT","REMOVE_CURRENT_INGREDIENT","MAKE_ORDER_REQUEST","MAKE_ORDER_SUCCESS","MAKE_ORDER_FAILED","CLEAR_ORDER_MODAL","SORT_CONSTRUCTOR_INGREDIENTS","CLEAR_CONSTRUCTOR_INGREDIENTS","makeData","ingredientsId","a","fetch","method","mode","headers","body","JSON","stringify","ingredients","then","_checkResponse","downloadData","res","ok","json","Promise","reject","status","ModalOverlay","children","handleClose","modalOverlayStyle","overlay","Modal","modalRoot","document","getElementById","useEffect","closeEsc","e","key","addEventListener","removeEventListener","ReactDOM","createPortal","modalStyles","stopPropagation","closeButton","IngredientDeatils","currentIngredient","ingredientDetailsStyles","header","BurgerIngredients","dispatch","useDispatch","useState","current","setCurrent","bunTab","useRef","sauceTab","mainTab","scrollIntoView","behavior","buns","filter","mains","sauces","handleOpen","currentModalIngredient","IngredientsStyle","value","active","onScroll","topPrice","target","getBoundingClientRect","top","bunPosition","bottom","mainPosition","saucePosition","grid","map","OrderDetails","orderNumber","store","orderDetailsStyle","check","BurgerConstructorElement","index","moveIngredient","useDrop","accept","collect","monitor","handlerId","getHandlerId","hover","dragIndex","hoverIndex","hoverBoundingRect","hoverMiddleY","hoverClientY","getClientOffset","y","drop","id","isDragging","opacity","drag","isLocked","handleRemoveIngredient","text","thumbnail","BurgerConstructor","totalPrice","setTotalPrice","bunPrice","sum","elementsId","itemsArr","el","push","uuid","uuidv4","dropHandler","dropTarget","useCallback","sortedIngredients","update","$splice","construcorStyle","undefined","list","flexCheck","success","currentOrder","order","catch","err","console","log","App","data","appStyle","app","main","DndProvider","backend","HTML5Backend","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","ingredientsRequest","ingredientsFailed","makeOrderRequest","makeOrderFailed","rootReducer","combineReducers","action","_","i","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","createStore","render","StrictMode","module","exports"],"mappings":"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","file":"static/js/main.b591f74e.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Logo, BurgerIcon, ListIcon, ProfileIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport headerStyle from './app-header.module.css';\r\n\r\nconst AppHeader = () => {\r\n  return(\r\n    <header>\r\n      <nav className={headerStyle.container}>\r\n      <div className={headerStyle.flex}>\r\n        <a className={`${headerStyle.item} pt-4 pb-4 pl-5 pr-5 ml-2 `} href=\"/#\">\r\n          <BurgerIcon type=\"primary\" />\r\n          <p className={`text text_type_main-default text_color_primary pl-2`}>Конструктор</p>\r\n        </a>\r\n        <a className={`${headerStyle.item} pt-4 pb-4 pl-5 pr-5 ml-2 `} href=\"/#\">\r\n          <ListIcon type=\"primary\" />\r\n          <p className={`text text_type_main-default text_color_inactive pl-2`}>Лента заказов</p>\r\n        </a>\r\n      </div>\r\n      <Logo />\r\n      <a className={`${headerStyle.item} pt-4 pb-4 pl-5 pr-5 ml-2`} href=\"/#\">\r\n        <ProfileIcon type=\"primary\" />\r\n        <p className={`text text_type_main-default text_color_inactive pl-2`}>Личный кабинет</p>\r\n      </a>\r\n      </nav>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default AppHeader","import PropTypes from 'prop-types'\r\n\r\nconst ingredientsShape = PropTypes.shape({\r\n  name: PropTypes.string.isRequired,\r\n  image: PropTypes.string.isRequired,\r\n  calories: PropTypes.number.isRequired,\r\n  proteins: PropTypes.number.isRequired,\r\n  fat: PropTypes.number.isRequired,\r\n  carbohydrates: PropTypes.number.isRequired,\r\n  price: PropTypes.number.isRequired,\r\n  _id: PropTypes.string.isRequired\r\n})\r\n\r\nexport default ingredientsShape","import React, { useMemo } from 'react'\r\nimport IngredientsItemStyle from './ingredients-item.module.css'\r\nimport { Counter, CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\"\r\nimport ingredientsShape from '../../utils/types'\r\nimport { useDrag } from 'react-dnd'\r\nimport { useSelector } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst IngredientsItem = ({ ingredient, handleClick }) => {\r\n  const constructorElements = useSelector(state => state.burger.constructorElements)\r\n  const bun = useSelector(state => state.burger.bun)\r\n\r\n  const count = useMemo(() => {\r\n    if (ingredient.type !== 'bun') {\r\n      return constructorElements.reduce((acc, item) => item._id === ingredient._id ? acc + 1 : acc, 0)\r\n    } else if (bun && bun._id === ingredient._id) {\r\n      return 1\r\n    }\r\n  }, [constructorElements, bun, ingredient._id, ingredient.type])\r\n\r\n  const [, dragRef] = useDrag({\r\n    type: 'ingredient',\r\n    item: { ingredient }\r\n  })\r\n\r\n  return (\r\n    <article onClick={() => handleClick(ingredient)} className={IngredientsItemStyle.container} ref={dragRef}>\r\n      {count > 0 && \r\n        <Counter count={count} size=\"default\" />}\r\n      <img src={ingredient.image} alt={ingredient.name} />\r\n      <div className={`${IngredientsItemStyle.flex} pb-1 pt-1`} >\r\n        <span style={{textAlign: \"center\"}} className=\"text text_type_digits-default\">{ingredient.price}</span>\r\n        <CurrencyIcon type={\"primary\"} />\r\n      </div>\r\n      <p className=\"text text_type_main-default text_color_primary\">{ingredient.name}</p>\r\n    </article>\r\n  )\r\n}\r\n\r\nIngredientsItem.propTypes = {\r\n  ingredient: ingredientsShape.isRequired,\r\n  handleClick: PropTypes.func.isRequired\r\n}\r\n\r\nexport default IngredientsItem","const apiLink = \"https://norma.nomoreparties.space/api\";\r\n\r\nexport default apiLink","import apiLink from '../../utils/constants'\r\n\r\nexport const ADD_INGREDIENT = 'ADD_INGREDIENT'\r\nexport const REMOVE_INGREDIENT = \"REMOVE_INGREDIENT\"\r\nexport const ADD_BUN = \"ADD_BUN\"\r\nexport const GET_INGREDIENTS_REQUEST = 'GET_INGREDIENTS_REQUEST'\r\nexport const GET_INGREDIENTS_SUCCESS = 'GET_INGREDIENTS_SUCCESS'\r\nexport const GET_INGREDIENTS_FAILED = 'GET_INGREDIENTS_FAILED'\r\nexport const ADD_CURRENT_INGREDIENT = \"ADD_CURRENT_INGREDIENT\"\r\nexport const REMOVE_CURRENT_INGREDIENT = \"REMOVE_CURRENT_INGREDIENT\"\r\nexport const MAKE_ORDER_REQUEST = 'MAKE_ORDER_REQUEST' \r\nexport const MAKE_ORDER_SUCCESS = 'MAKE_ORDER_SUCCESS'\r\nexport const MAKE_ORDER_FAILED = 'MAKE_ORDER_FAILED'\r\nexport const CLEAR_ORDER_MODAL = 'CLEAR_ORDER_MODAL'\r\nexport const SORT_CONSTRUCTOR_INGREDIENTS = 'SORT_CONSTRUCTOR_INGREDIENTS'\r\nexport const CLEAR_CONSTRUCTOR_INGREDIENTS = \"CLEAR_CONSTRUCTOR_INGREDIENTS\"\r\n\r\nexport function getIngredients (ingredientId) {\r\n  return function(dispatch) {\r\n    dispatch({\r\n      type: GET_INGREDIENTS_REQUEST\r\n    })\r\n    downloadData().then(res => {\r\n      if (res && res.success) {\r\n        dispatch({\r\n          type: GET_INGREDIENTS_SUCCESS,\r\n          ingredients: res.data\r\n        })\r\n      } else {\r\n        dispatch({\r\n          type: GET_INGREDIENTS_FAILED\r\n        })\r\n      }\r\n    }).catch(err => console.log(`Error: ${err}`))\r\n  }\r\n}\r\n\r\nexport function makeOrder(ingredientsId) {\r\n  return function(dispatch) {\r\n    dispatch({\r\n      type: MAKE_ORDER_REQUEST\r\n    })\r\n    makeData(ingredientsId).then(res => {\r\n      if (res && res.success) {\r\n        dispatch({\r\n          type: MAKE_ORDER_SUCCESS,\r\n          currentOrder: res.name,\r\n          orderNumber: res.order.number\r\n        })\r\n      } else {\r\n        dispatch({\r\n          type: MAKE_ORDER_FAILED\r\n        })\r\n      }\r\n    }).catch(err => console.log(`Error: ${err}`))\r\n  }\r\n}\r\n\r\nexport const makeData = async(ingredientsId) => {\r\n  return await fetch(`${apiLink}/orders`, {\r\n    method: 'POST',\r\n    mode: 'cors',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      ingredients: ingredientsId\r\n    })\r\n  }).then(_checkResponse)\r\n}\r\n\r\nconst downloadData = async () => {\r\n  return await fetch(`${apiLink}/ingredients`).then(_checkResponse)\r\n}\r\n\r\nfunction _checkResponse (res) {\r\n  if (res.ok) {\r\n   return res.json()\r\n  }\r\n\r\n  return Promise.reject(`Ошибка ${res.status}`)\r\n}","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport modalOverlayStyle from './modal-overlay.module.css'\r\n\r\nconst ModalOverlay = ({ children, handleClose }) => {\r\n  return (\r\n    <div className={modalOverlayStyle.overlay} onClick={handleClose}>\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n\r\nModalOverlay.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n  handleClose: PropTypes.func.isRequired\r\n}\r\n\r\nexport default ModalOverlay","import React, { useEffect } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport ModalOverlay from \"../modal-overlay/modal-overlay\";\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport PropTypes from 'prop-types'\r\nimport modalStyles from './modal.module.css'\r\n\r\nconst Modal = ({ children, handleClose}) => {\r\n  \r\n  const modalRoot = document.getElementById('modal-root')\r\n\r\n  const stopPropagation = (e) => {\r\n    e.stopPropagation()\r\n  }\r\n\r\n  useEffect(() => {\r\n    const closeEsc = (e) => {\r\n      if(e.key === 'Escape') {\r\n        handleClose(e)\r\n      }\r\n    }\r\n    document.addEventListener('keydown', closeEsc)\r\n\r\n    return () => (\r\n      document.removeEventListener('keydown', closeEsc)\r\n    )\r\n  }, [handleClose])\r\n\r\n  return ReactDOM.createPortal(\r\n    (\r\n      <ModalOverlay handleClose={handleClose}>\r\n        <div className={modalStyles.container} onClick={stopPropagation}>\r\n          <button type='button' className={modalStyles.closeButton} onClick={handleClose}>\r\n            <CloseIcon type='primary' />\r\n          </button>\r\n          {children}\r\n        </div>\r\n      </ModalOverlay>\r\n    ),\r\n    modalRoot,\r\n  )\r\n}\r\n\r\nModal.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n  handleClose: PropTypes.func.isRequired\r\n}\r\n\r\nexport default Modal","import React from 'react'\r\nimport ingredientDetailsStyles from './ingredient-details.module.css'\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst IngredientDeatils = () => {\r\n  const ingredients = useSelector(state => state.burger.currentIngredient)\r\n  \r\n  return (\r\n    <>\r\n      <h3 className={`${ingredientDetailsStyles.header} pl-10 pt-10 text text_type_main-large text_color_primary`}>Детали ингредиента</h3>\r\n      <img className={ingredientDetailsStyles.image} src={ingredients.image} alt={ingredients.name} />\r\n      <p className=\"pb-8 pt-4 text text_type_main-medium text_color_primary\">{ingredients.name}</p>\r\n      <ul className={`mb-15  ${ingredientDetailsStyles.container}`}>\r\n        <li>\r\n          <p className=\"pb-2 text text_type_main-default text_color_inactive\">Калории,ккал</p>\r\n          <p className=\"text text_type_digits-default text_color_inactive\">{ingredients.calories}</p>\r\n        </li>\r\n        <li>\r\n          <p className=\"pb-2 text text_type_main-default text_color_inactive\">Белки, г</p>\r\n          <p className=\"text text_type_digits-default text_color_inactive\">{ingredients.proteins}</p>\r\n        </li>\r\n        <li>\r\n          <p className=\"pb-2 text text_type_main-default text_color_inactive\">Жиры, г</p>\r\n          <p className=\"text text_type_digits-default text_color_inactive\">{ingredients.fat}</p>\r\n        </li>\r\n        <li>\r\n          <p className=\"pb-2 text text_type_main-default text_color_inactive\">Углеводы, г</p>\r\n          <p className=\"text text_type_digits-default text_color_inactive\">{ingredients.carbohydrates}</p>\r\n        </li>\r\n      </ul>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default IngredientDeatils","import React, { useState, useRef, useMemo, useEffect } from 'react' \r\nimport IngredientsItem from '../ingredients-item/ingredients-item'\r\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport IngredientsStyle from './burger-ingredients.module.css'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { ADD_CURRENT_INGREDIENT, REMOVE_CURRENT_INGREDIENT } from '../../services/actions'\r\nimport Modal from '../modal/modal'\r\nimport IngredientDeatils from '../ingredient-details/ingredient-details'\r\n\r\n\r\nconst BurgerIngredients = () => {\r\n  const ingredients = useSelector(state => state.burger.ingredients)\r\n  const dispatch = useDispatch()\r\n\r\n  const [current, setCurrent] = useState('buns')\r\n\r\n  const bunTab = useRef();\r\n  const sauceTab = useRef();\r\n  const mainTab = useRef();\r\n\r\n  useEffect(() => {\r\n    if (current === \"buns\") {\r\n      bunTab.current.scrollIntoView({behavior: 'smooth'})\r\n    } else if (current === \"sauces\") {\r\n      sauceTab.current.scrollIntoView({behavior: 'smooth'})\r\n    } else if (current === \"main\") {\r\n      mainTab.current.scrollIntoView({behavior: 'smooth'})\r\n    }\r\n  }, [current])\r\n  \r\n\r\n  const buns = useMemo(() =>\r\n   ingredients.filter((ingredient) => ingredient.type === 'bun'), [ingredients])\r\n\r\n  const mains = useMemo(() =>\r\n   ingredients.filter((ingredient) => ingredient.type === 'main'), [ingredients])\r\n   \r\n  const sauces = useMemo(() =>\r\n   ingredients.filter((ingredient) => ingredient.type === 'sauce'), [ingredients])\r\n\r\n  const handleOpen = (item) => {\r\n    dispatch({\r\n      type: ADD_CURRENT_INGREDIENT,\r\n      item: item\r\n    })\r\n  }\r\n\r\n  const handleClose = () => {\r\n    dispatch({\r\n      type: REMOVE_CURRENT_INGREDIENT\r\n    })\r\n  }\r\n\r\n  const currentModalIngredient = useSelector(state => state.burger.currentIngredient)\r\n\r\n  const handleScroll = (e) => {\r\n    const topPrice = e.target.getBoundingClientRect().top\r\n    \r\n    const bunPosition = { top: bunTab.current.getBoundingClientRect().top, bottom: bunTab.current.getBoundingClientRect().bottom }\r\n    const mainPosition= { top: mainTab.current.getBoundingClientRect().top, bottom: mainTab.current.getBoundingClientRect().bottom }\r\n    const saucePosition = { top: sauceTab.current.getBoundingClientRect().top, bottom: sauceTab.current.getBoundingClientRect().bottom }\r\n\r\n    if (bunPosition.top <= topPrice && bunPosition.bottom > topPrice) {\r\n      setCurrent('buns')\r\n    } else if (saucePosition.top <= topPrice && saucePosition.bottom > topPrice) {\r\n      setCurrent('sauces')\r\n    } else if (mainPosition.top <= topPrice && mainPosition.bottom > topPrice) {\r\n      setCurrent('main')\r\n    }\r\n  }\r\n\r\n  return(\r\n    <>\r\n      <section className={`${IngredientsStyle.container} pt-10 pr-10`}>\r\n        <h1 className=\"text text_type_main-large pb-5\">Соберите бургер</h1>\r\n        <div className={IngredientsStyle.flex}>\r\n          <Tab value=\"buns\" active={current === 'buns'} onClick={setCurrent} >\r\n            Булки\r\n          </Tab>\r\n          <Tab value=\"sauces\" active={current === 'sauces'} onClick={setCurrent} >\r\n            Соусы\r\n          </Tab>\r\n          <Tab value=\"main\" active={current === 'main'} onClick={setCurrent} >\r\n            Начинки\r\n          </Tab>\r\n        </div>\r\n        <div  className={`${IngredientsStyle.type} custom-scroll mt-10 pr-1`} onScroll={handleScroll}>\r\n          <div ref={bunTab}>\r\n            <h3 className=\"text text_type_main-medium pb-6\">Булки</h3>\r\n            <div className={IngredientsStyle.grid}>\r\n              {buns.map((item) => (\r\n                <IngredientsItem key={item._id} ingredient={item} handleClick={handleOpen} />\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <div ref={sauceTab}>\r\n            <h3 className=\"text text_type_main-medium pb-6\">Соусы</h3>\r\n            <div className={IngredientsStyle.grid}>\r\n              {sauces.map((item) => (\r\n                <IngredientsItem key={item._id} ingredient={item} handleClick={handleOpen} />\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <div ref={mainTab}>\r\n            <h3 className=\"text text_type_main-medium pb-6\">Начинки</h3>\r\n            <div className={IngredientsStyle.grid}>\r\n              {mains.map((item) => (\r\n                <IngredientsItem key={item._id} ingredient={item} handleClick={handleOpen} />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n      {currentModalIngredient && \r\n        <Modal handleClose={handleClose}>\r\n          <IngredientDeatils></IngredientDeatils>\r\n        </Modal>\r\n      }\r\n    </>\r\n  )\r\n}\r\n\r\nexport default BurgerIngredients","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport orderDetailsStyle from './order-details.module.css'\r\n\r\nconst OrderDetails = () => {\r\n  const orderNumber = useSelector(store => store.burger.orderNumber)\r\n\r\n  return (\r\n    <div className={`pt-8 pb-30 ${orderDetailsStyle.container}`}>\r\n      <p className={`pt-9 pb-8 text text_type_digits-large`}>{orderNumber}</p>\r\n      <p className=\"text text_type_main-medium\">идентификатор заказа</p>\r\n      <div className={`mt-15 mb-15 ${orderDetailsStyle.check}`}></div>\r\n      <p className=\"pb-2 text text_type_main-default\">Ваш заказ начали готовить</p>\r\n      <p className=\"text text_type_main-default text_color_inactive\">Дождитесь готовности на орбитальной станции</p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default OrderDetails","import React, { useRef } from 'react'\r\nimport { ConstructorElement } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { useDrop, useDrag } from 'react-dnd'\r\nimport { useDispatch } from 'react-redux'\r\nimport { REMOVE_INGREDIENT } from '../../services/actions'\r\n\r\nconst BurgerConstructorElement = ({ ingredient, index, moveIngredient }) => {\r\n  const dispatch = useDispatch()\r\n  const ref = useRef(null)\r\n\r\n  const [{ handlerId }, drop] = useDrop({\r\n    accept: \"constructorIngredient\",\r\n    collect(monitor) {\r\n      return {\r\n        handlerId: monitor.getHandlerId(),\r\n      };\r\n    },\r\n    hover(item, monitor) {\r\n      if (!ref.current) {\r\n        return;\r\n      }\r\n      const dragIndex = item.index\r\n      const hoverIndex = index\r\n\r\n      if (dragIndex === hoverIndex) {\r\n        return;\r\n      }\r\n      \r\n      const hoverBoundingRect = ref.current?.getBoundingClientRect()\r\n      const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2\r\n      const clientOffset = monitor.getClientOffset()\r\n      const hoverClientY = clientOffset.y - hoverBoundingRect.top\r\n\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n        return;\r\n      }\r\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n        return;\r\n      }\r\n\r\n      moveIngredient(dragIndex, hoverIndex);\r\n      item.index = hoverIndex;\r\n    },\r\n  });\r\n\r\n  const [{ isDragging }, drag] = useDrag({\r\n    type: \"constructorIngredient\",\r\n    item: () => {\r\n      return { id: ingredient._id, index };\r\n    },\r\n    collect: (monitor) => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  });\r\n\r\n  const opacity = isDragging ? 0.2 : 1;\r\n\r\n  drag(drop(ref));\r\n\r\n  function handleRemoveIngredient(index) {\r\n    dispatch({\r\n      type: REMOVE_INGREDIENT,\r\n      index: index\r\n    })\r\n  }\r\n\r\n  return (\r\n    <li className={'ml-4'} style={{ opacity }} ref={ref} data-handler-id={handlerId}>\r\n      <ConstructorElement\r\n        type={null}\r\n        isLocked={false}\r\n        handleClose={() => handleRemoveIngredient(index)}\r\n        text={ingredient.name}\r\n        thumbnail={ingredient.image}\r\n        price={ingredient.price} />\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default BurgerConstructorElement","import React, { useState, useEffect, useCallback, useMemo } from 'react'\r\nimport { Button, CurrencyIcon, ConstructorElement} from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport construcorStyle from './burger-constructor.module.css'\r\nimport OrderDetails from '../order-details/order-details'\r\nimport Modal from '../modal/modal'\r\nimport { useDrop } from 'react-dnd'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { ADD_BUN, ADD_INGREDIENT, CLEAR_CONSTRUCTOR_INGREDIENTS, CLEAR_ORDER_MODAL, SORT_CONSTRUCTOR_INGREDIENTS, makeOrder } from '../../services/actions'\r\nimport update from 'immutability-helper'\r\nimport { v4 as uuidv4 } from 'uuid'\r\nimport BurgerConstructorElement from '../burgerConstructorElement/burger-constructor-element'\r\n\r\n\r\nconst BurgerConstructor = () => {\r\n  const dispatch = useDispatch()\r\n  const constructorElements = useSelector(state => state.burger.constructorElements)\r\n  const orderNumber = useSelector(state => state.burger.orderNumber)\r\n  const bun = useSelector(state => state.burger.bun)\r\n\r\n  const [ totalPrice, setTotalPrice ] = useState(0)\r\n\r\n  useEffect(() => {\r\n    if(bun) {\r\n      const bunPrice = bun.price * 2\r\n      setTotalPrice(constructorElements.reduce((sum, ingredient) => sum + ingredient.price, bunPrice))\r\n    }\r\n  }, [constructorElements, bun])\r\n\r\n    const handleClose = () => {\r\n      dispatch({\r\n        type: CLEAR_ORDER_MODAL\r\n      })\r\n    }\r\n\r\n    const elementsId = useMemo(() => {\r\n      const itemsArr = constructorElements.map(el => el._id)\r\n      if(bun) {\r\n        itemsArr.push(bun?._id)\r\n      return itemsArr\r\n      }\r\n    }, [constructorElements, bun])\r\n\r\n\r\n    const handleOpen = () => {\r\n      dispatch(makeOrder(elementsId))\r\n      dispatch({\r\n        type: CLEAR_CONSTRUCTOR_INGREDIENTS\r\n      })\r\n    }\r\n\r\n    const [, dropTarget] = useDrop({\r\n      accept: 'ingredient',\r\n      drop(ingredient) {\r\n        dropHandler(ingredient)\r\n      }\r\n    })\r\n\r\n    function dropHandler(ingredient) {\r\n      if (ingredient.ingredient.type !== 'bun') {\r\n        dispatch ({\r\n          type: ADD_INGREDIENT,\r\n          item: {\r\n            ...ingredient.ingredient,\r\n          uuid: uuidv4()\r\n          }\r\n        })\r\n      } else if (ingredient.ingredient.type === 'bun') {\r\n        dispatch({\r\n          type: ADD_BUN,\r\n          item: ingredient.ingredient\r\n        })\r\n      }\r\n    }\r\n\r\n    const moveIngredient = useCallback(\r\n      (dragIndex, hoverIndex) => {\r\n        const ingredient = constructorElements[dragIndex];\r\n        dispatch({\r\n          type: SORT_CONSTRUCTOR_INGREDIENTS,\r\n          sortedIngredients: update(constructorElements, {\r\n            $splice: [\r\n              [dragIndex, 1],\r\n              [hoverIndex, 0, ingredient],\r\n            ],\r\n          }),\r\n        });\r\n      },\r\n      [constructorElements, dispatch]\r\n    );\r\n      \r\n  return (\r\n    <section className={`${construcorStyle.container} pt-25`} ref={dropTarget}>\r\n      {bun && \r\n      <ConstructorElement \r\n        type={\"top\"}\r\n        isLocked={true}\r\n        handleClose={undefined}\r\n        text={`${bun.name} ${'(верх)'}`}\r\n        price={bun.price}\r\n        thumbnail={bun.image}\r\n      />}\r\n      <ul className={`${construcorStyle.list} custom-scroll pr-1 pl-2 mt-4 mb-4 `}>\r\n        {constructorElements.map((item, index) => (\r\n          <BurgerConstructorElement key={item.uuid} ingredient={item} index={index} moveIngredient={moveIngredient}></BurgerConstructorElement>\r\n        ))}\r\n      </ul>\r\n      {bun && \r\n      <ConstructorElement\r\n        type={\"bottom\"}\r\n        isLocked={true}\r\n        handleClose={undefined}\r\n        text={`${bun.name} ${'(низ)'}`}\r\n        price={bun.price}\r\n        thumbnail={bun.image}\r\n      />}\r\n      {constructorElements && bun && \r\n        <div className={`${construcorStyle.flex} ${construcorStyle.flexCheck} pt-10`}>\r\n          <div className={`${construcorStyle.flex} pr-10`}>\r\n            <p className=\"text text_type_digits-medium text_color_primary pr-2\"> {totalPrice} </p>\r\n            <CurrencyIcon className=\"pr-10\" />\r\n          </div>\r\n          <Button type=\"primary\" size=\"medium\" onClick={handleOpen}>\r\n            Оформить заказ\r\n          </Button>\r\n        </div>\r\n      }\r\n      {orderNumber && \r\n        <Modal handleClose={handleClose}>\r\n          <OrderDetails></OrderDetails>\r\n        </Modal>\r\n      \r\n      }\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default BurgerConstructor","import React, { useEffect } from 'react';\nimport AppHeader from '../app-header/app-header';\nimport BurgerIngredients from '../burger-ingredients/burger-ingredients'\nimport BurgerConstructor from '../burger-constructor/burger-constructor'\nimport appStyle from './app.module.css';\nimport apiLink from '../../utils/constants';\nimport { DndProvider } from 'react-dnd'\nimport { HTML5Backend } from 'react-dnd-html5-backend'\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getIngredients } from '../../services/actions/index'\n\nconst App = () => {\n  const dispatch = useDispatch()\n  const ingredients = useSelector(state => state.burger.ingredients)\n\n  useEffect(() => {\n    dispatch(getIngredients())\n  }, [dispatch]);\n  \n  return (\n    <div className={appStyle.app}>\n      <AppHeader />\n      <main className={appStyle.main} >\n        {ingredients && \n          <DndProvider backend={HTML5Backend}>\n            <BurgerIngredients />\n            <BurgerConstructor  />\n          </DndProvider>\n      }\n      </main>\n    </div>\n  );\n}\n\nexport { App, apiLink }\n\n\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {\r\n  ADD_INGREDIENT,\r\n  REMOVE_INGREDIENT,\r\n  ADD_BUN,\r\n  GET_INGREDIENTS_REQUEST,\r\n  GET_INGREDIENTS_SUCCESS,\r\n  GET_INGREDIENTS_FAILED,\r\n  ADD_CURRENT_INGREDIENT,\r\n  REMOVE_CURRENT_INGREDIENT,\r\n  MAKE_ORDER_REQUEST,\r\n  MAKE_ORDER_SUCCESS,\r\n  MAKE_ORDER_FAILED,\r\n  CLEAR_ORDER_MODAL,\r\n  SORT_CONSTRUCTOR_INGREDIENTS,\r\n  CLEAR_CONSTRUCTOR_INGREDIENTS\r\n} from \"../actions/index\";\r\n\r\nconst initialState = {\r\n  constructorElements: [],\r\n  bun: null,\r\n\r\n  ingredients: [],\r\n  ingredientsRequest: false,\r\n  ingredientsFailed: false,\r\n\r\n  currentIngredient: null,\r\n\r\n  makeOrderRequest: false,\r\n  makeOrderFailed: false,\r\n  currentOrder: null,\r\n  orderNumber: null\r\n}\r\n\r\nexport const burgerReducer = (state = initialState, action) => {\r\n  switch(action.type) {\r\n    case ADD_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        constructorElements: [...state.constructorElements, action.item]\r\n      }\r\n    }\r\n    case REMOVE_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        constructorElements: [...state.constructorElements].filter((_, i) => action.index !== i)\r\n      }\r\n    }\r\n    case ADD_BUN: {\r\n      return {\r\n        ...state,\r\n        bun: action.item\r\n      }\r\n    }\r\n    case GET_INGREDIENTS_REQUEST: {\r\n      return {\r\n        ...state,\r\n        ingredientsRequest: true\r\n      }\r\n    }\r\n    case GET_INGREDIENTS_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        ingredientsRequest: false,\r\n        ingredients: action.ingredients\r\n      }\r\n    }\r\n    case GET_INGREDIENTS_FAILED: {\r\n      return {\r\n        ...state,\r\n        ingredientsRequest: false,\r\n        ingredientsFailed: true\r\n      }\r\n    }\r\n    case ADD_CURRENT_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        currentIngredient: action.item\r\n      }\r\n    }\r\n    case REMOVE_CURRENT_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        currentIngredient: null\r\n      }\r\n    }\r\n    case MAKE_ORDER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        makeOrderRequest: true\r\n      }\r\n    }\r\n    case MAKE_ORDER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        makeOrderRequest: false,\r\n        makeOrderFailed: false,\r\n        currentOrder: action.currentOrder,\r\n        orderNumber: action.orderNumber\r\n      }\r\n    }\r\n    case MAKE_ORDER_FAILED: {\r\n      return {\r\n        ...state,\r\n        makeOrderRequest: false,\r\n        makeOrderFailed: true\r\n      }\r\n    }\r\n    case CLEAR_ORDER_MODAL: {\r\n      return {\r\n        ...state,\r\n        orderNumber: null\r\n      }\r\n    }\r\n    case SORT_CONSTRUCTOR_INGREDIENTS: {\r\n      return {\r\n        ...state,\r\n        constructorElements: action.sortedIngredients\r\n      }\r\n    }\r\n    case CLEAR_CONSTRUCTOR_INGREDIENTS: {\r\n      return {\r\n        ...state,\r\n        constructorElements: [],\r\n        bun: null\r\n      }\r\n    }\r\n    default: {\r\n      return state\r\n    }\r\n  }\r\n}","import { combineReducers } from \"redux\";\r\nimport { burgerReducer } from './burger'\r\n\r\nexport const rootReducer = combineReducers({\r\n  burger: burgerReducer\r\n})\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './components/app/app'\nimport reportWebVitals from './reportWebVitals';\nimport thunk from 'redux-thunk'\nimport { applyMiddleware, createStore, compose } from 'redux'\nimport { Provider } from 'react-redux'\nimport { rootReducer } from './services/reducers'\n\nconst composeEnhancers =\n  typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\n    : compose\n\nconst enhancer = composeEnhancers(applyMiddleware(thunk))\n\nconst store = createStore(rootReducer, enhancer)\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"burger-ingredients_container__2_Vm3\",\"grid\":\"burger-ingredients_grid__2Ggmf\",\"type\":\"burger-ingredients_type__1MYgM\",\"flex\":\"burger-ingredients_flex__37IDe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"app-header_container__3Oe03\",\"item\":\"app-header_item__EA0KV\",\"flex\":\"app-header_flex__1kWZW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"burger-constructor_container__2RT7k\",\"list\":\"burger-constructor_list__1YkNA\",\"flex\":\"burger-constructor_flex__a5_2A\",\"flexCheck\":\"burger-constructor_flexCheck__2jToV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ingredient-details_container__2urIj\",\"image\":\"ingredient-details_image__35xCy\",\"header\":\"ingredient-details_header__3qFaC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ingredients-item_container__3alZB\",\"flex\":\"ingredients-item_flex__2qY2N\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"modal_container__Yvv-n\",\"closeButton\":\"modal_closeButton__2eXp2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"order-details_container__2k1nw\",\"check\":\"order-details_check__2dh_U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"app_app__i_TAO\",\"main\":\"app_main__1kUw5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-overlay_overlay__1jhF1\"};"],"sourceRoot":""}